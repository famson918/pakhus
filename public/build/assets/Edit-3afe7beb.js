import{o,b as r,d as t,t as _,A as b,Q as B,h as d,R as F,F as k,s as w,v as C,C as I,m as Q,U as V,l as A,i as z,E as G,B as H,e as J,D as K}from"./app-92ca493c.js";import{u as W}from"./roles-5d2404f3.js";import{d as E,u as X,a as Y,r as Z,m as ee}from"./rules-ff33fc86.js";import{_ as te}from"./_plugin-vue_export-helper-c27b6911.js";const ae={class:"container"},se=["value"],ie={class:"middle"},le=["value"],ne={__name:"DualListBox",props:{leftLabel:{type:String,required:!0},rightLabel:{type:String,required:!0},leftData:{type:Array,required:!0},rightData:{type:Array,required:!0}},emits:["onChangeList"],setup(P,{emit:l}){let s=[],i=[];const g=l,a=P;function y(){if(!i.length)return;for(let e=i.length;e>0;e--){let u=a.rightData.indexOf(i[e-1]);a.rightData.splice(u,1),a.leftData.push(i[e-1]),i.pop()}let c=a.leftData,n=a.rightData;g("onChangeList",{leftData:c,rightData:n})}function D(){if(!s.length)return;for(let e=s.length;e>0;e--){let u=a.leftData.indexOf(s[e-1]);a.leftData.splice(u,1),a.rightData.push(s[e-1]),s.pop()}let c=a.leftData,n=a.rightData;g("onChangeList",{leftData:c,rightData:n})}return(c,n)=>(o(),r("div",ae,[t("div",null,[t("h2",null,_(a.leftLabel),1),b(t("select",{class:"form-select",multiple:"","onUpdate:modelValue":n[0]||(n[0]=e=>F(s)?s.value=e:s=e),onDblclick:D},[(o(!0),r(k,null,w(a.leftData,(e,u)=>(o(),r("option",{value:e,key:e.id},_(e.name),9,se))),128))],544),[[B,d(s)]])]),t("div",ie,[t("button",{class:"btn btn-primary",onClick:C(D,["prevent"])},"=>"),t("button",{class:"btn btn-primary",onClick:C(y,["prevent"])},"<=")]),t("div",null,[t("h2",null,_(a.rightLabel),1),b(t("select",{class:"form-select",multiple:"","onUpdate:modelValue":n[1]||(n[1]=e=>F(i)?i.value=e:i=e),onDblclick:y},[(o(!0),r(k,null,w(a.rightData,(e,u)=>(o(),r("option",{value:e,key:e.id},_(e.name),9,le))),128))],544),[[B,d(i)]])])]))}},oe=te(ne,[["__scopeId","data-v-9e45c8bc"]]),re={class:"row justify-content-center my-5"},de={class:"col"},ce={class:"card border-0 shadow-sm"},ue={class:"card-body"},me={class:"mb-3"},pe=t("label",{for:"post-title",class:"form-label"}," Title ",-1),_e={class:"form-outline w-25"},fe={class:"text-danger mt-1"},he={class:"text-danger mt-1"},ve={class:"mt-4"},ge=["disabled"],De={class:""},be={key:0},ye={key:1},Ce={__name:"Edit",async setup(P){let l,s;E("required",Z),E("min",ee);const i={name:"required|min:3"},{validate:g,errors:a,resetForm:y}=X({validationSchema:i}),{value:D}=Y("name",null,{initialValue:""}),{role:c,updateRolePermissions:n,getRole:e,updateRole:u,validationErrors:U,isLoading:x}=W(),f=I({name:D}),R=Q();let L=([l,s]=V(()=>axios.get("/api/permissions/")),l=await l,s(),l),M=L.data.data;L=([l,s]=V(()=>axios.get("/api/role-permissions/"+R.params.id)),l=await l,s(),l);let S=L.data.data,O=j(M,S),$=A(O),q=A(S);function N(){g().then(h=>{if(h.valid){let m=q.value.map(p=>p.id);n(f,m)}})}function T(h){}z(()=>{e(R.params.id)}),G(()=>{f.id=c.value.id,f.name=c.value.name});function j(h,m){return h.filter(p=>!m.some(v=>p.id===v.id))}return(h,m)=>{var p;return o(),r("div",re,[t("div",de,[t("div",ce,[t("div",ue,[t("form",{onSubmit:C(N,["prevent"])},[t("div",me,[pe,t("div",_e,[b(t("input",{"onUpdate:modelValue":m[0]||(m[0]=v=>f.name=v),id:"post-title",type:"text",class:"form-control"},null,512),[[H,f.name]])]),t("div",fe,_(d(a).name),1),t("div",he,[(o(!0),r(k,null,w((p=d(U))==null?void 0:p.name,v=>(o(),r("div",null,_(v),1))),256))])]),J(oe,{leftLabel:"Available Permissions",rightLabel:"Current Permissions",leftData:d($),rightData:d(q),onOnChangeList:T},null,8,["leftData","rightData"]),t("div",ve,[t("button",{disabled:d(x),class:"btn btn-primary"},[b(t("div",De,null,512),[[K,d(x)]]),d(x)?(o(),r("span",be,"Processing...")):(o(),r("span",ye,"Update"))],8,ge)])],32)])])])])}}};export{Ce as default};
