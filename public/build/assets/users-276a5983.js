import{i as c,a as m,B as h,j as v,u as g,c as x}from"./app-c86f40bf.js";function S(){const p=c([]),d=c({name:""}),{t:a}=m(),l=h(),o=c({}),r=c(!1),n=v("$swal"),f=g();x(()=>f.state.lang.locale);const i=async()=>{axios.get("/api/users").then(s=>{f.dispatch("users/getUsers",s.data),p.value=s.data})};return{users:p,user:d,getUsers:i,getUser:async s=>{axios.get("/api/users/"+s).then(e=>{d.value=e.data.data})},storeUser:async s=>{if(r.value)return;r.value=!0,o.value={};let e=new FormData;for(let t in s)s.hasOwnProperty(t)&&e.append(t,s[t]);axios.post("/api/users",e).then(t=>{i(),l.push({name:"users.index"}),n({position:"top-end",icon:"success",title:a("userSavedSuccessMessage"),showConfirmButton:!1,timer:1500})}).catch(t=>{var u;(u=t.response)!=null&&u.data&&(o.value=t.response.data.errors)}).finally(()=>r.value=!1)},updateUser:async s=>{r.value||(r.value=!0,o.value={},axios.put("/api/users/"+s.id,s).then(e=>{i(),l.push({name:"users.index"}),n({position:"top-end",icon:"success",title:a("userUpdatedSuccessMessage"),showConfirmButton:!1,timer:1500})}).catch(e=>{var t;(t=e.response)!=null&&t.data&&(o.value=e.response.data.errors)}).finally(()=>r.value=!1))},deleteUser:async s=>{let e={};e.title=a("areYouSure"),e.text=a("youCanCancel"),e.confirmButtonText=a("yesDeleteIt"),e.confirmButtonColor="#ef4444",e.timer=2e4,e.timerProgressBar=!0,e.reverseButtons=!0,n(e).then(t=>{t.isConfirmed&&axios.delete("/api/users/"+s).then(u=>{i(),l.push({name:"users.index"}),n({position:"top-end",icon:"success",title:a("userDeletedSuccessMessage"),showConfirmButton:!1,timer:1500})}).catch(u=>{n({icon:"error",title:a("error_alert_text")})})})},validationErrors:o,isLoading:r}}export{S as u};
