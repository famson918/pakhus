import{l,M as v,j as g,c as B}from"./app-92ca493c.js";function _(){const c=l([]),f=l({name:""}),u=v(),a=l({}),r=l(!1),o=g("$swal"),i=B(()=>store.state.lang.locale),d=async(t=1,e="",s="",n="",p="created_at",m="desc")=>{axios.get("/api/users?page="+t+"&search_id="+e+"&search_title="+s+"&search_global="+n+"&order_column="+p+"&order_direction="+m).then(h=>{c.value=h.data})};return{users:c,user:f,getUsers:d,getUser:async t=>{axios.get("/api/users/"+t).then(e=>{f.value=e.data.data})},storeUser:async t=>{if(r.value)return;r.value=!0,a.value={};let e=new FormData;for(let s in t)t.hasOwnProperty(s)&&e.append(s,t[s]);axios.post("/api/users",e).then(s=>{u.push({name:"users.index"}),i.value==="en"?o({position:"top-end",icon:"success",title:"User saved successfully",showConfirmButton:!1,timer:1500}):o({position:"top-end",icon:"success",title:"用户保存成功",showConfirmButton:!1,timer:1500})}).catch(s=>{var n;(n=s.response)!=null&&n.data&&(a.value=s.response.data.errors)}).finally(()=>r.value=!1)},updateUser:async t=>{r.value||(r.value=!0,a.value={},axios.put("/api/users/"+t.id,t).then(e=>{u.push({name:"users.index"}),i.value==="en"?o({position:"top-end",icon:"success",title:"User updated successfully",showConfirmButton:!1,timer:1500}):o({position:"top-end",icon:"success",title:"用户更新成功",showConfirmButton:!1,timer:1500})}).catch(e=>{var s;(s=e.response)!=null&&s.data&&(a.value=e.response.data.errors)}).finally(()=>r.value=!1))},deleteUser:async t=>{let e={};i.value==="en"?(e.title="Are you sure?",e.text="You won't be able to revert this action!",e.confirmButtonText="Yes, delete it!",e.confirmButtonColor="#ef4444",e.timer=2e4,e.timerProgressBar=!0,e.reverseButtons=!0):(e.title="你确定吗？",e.text="您将无法恢复此操作！",e.confirmButtonText="是的，删除它！",e.confirmButtonColor="#ef4444",e.timer=2e4,e.timerProgressBar=!0,e.reverseButtons=!0),o(e).then(s=>{s.isConfirmed&&axios.delete("/api/users/"+t).then(n=>{d(),u.push({name:"users.index"}),i.value==="en"?o({position:"top-end",icon:"success",title:"User deleted successfully",showConfirmButton:!1,timer:1500}):o({position:"top-end",icon:"success",title:"用户删除成功",showConfirmButton:!1,timer:1500})}).catch(n=>{i.value==="en"?o({icon:"error",title:"Something went wrong"}):o({icon:"error",title:"出了些问题"})})})},validationErrors:a,isLoading:r}}export{_ as u};
