import{M as p,u as f,l as d,j as m,c as g}from"./app-92ca493c.js";function x(){const r=p(),c=f(),i=d({}),a=d(!1),s=m("$swal"),l=g(()=>c.state.lang.locale),u=async()=>{axios.get("/api/goods").then(t=>{c.dispatch("good/getGoods",t.data.data)})};return{getGoods:u,getGood:async()=>{console.log("router.params.id",r.params.id),axios.get("/api/get-good/"+r.params.id).then(({data:t})=>{console.log("data----------",t),c.dispatch("good/getGood",t)})},storeGood:async t=>{if(a.value)return;a.value=!0,i.value={};let e=new FormData;for(let o in t)t.hasOwnProperty(o)&&e.append(o,t[o]);console.log("serializedGood",e),axios.post("/api/goods",e,{headers:{"content-type":"multipart/form-data"}}).then(o=>{console.log("response",o),l.value==="en"?s({position:"top-end",icon:"success",title:"Goods saved successfully",showConfirmButton:!1,timer:1500}):s({position:"top-end",icon:"success",title:"提案已成功保存",showConfirmButton:!1,timer:1500}),r.push({name:"salesManager.index"})}).catch(o=>{var n;(n=o.response)!=null&&n.data&&(i.value=o.response.data.errors)}).finally(()=>a.value=!1)},updateGood:async t=>{if(a.value)return;a.value=!0,i.value={},console.log("good----",t);let e=new FormData;for(let o in t)t.hasOwnProperty(o)&&e.append(o,t[o]);console.log("serializedGood",e),axios.post("/api/goods-update",e,{headers:{"content-type":"multipart/form-data"}}).then(o=>{console.log("response",o),l.value==="en"?s({position:"top-end",icon:"success",title:"Goods updated successfully",showConfirmButton:!1,timer:1500}):s({position:"top-end",icon:"success",title:"商品更新成功",showConfirmButton:!1,timer:1500}),r.push({name:"salesManager.index"})}).catch(o=>{var n;console.log("error",o),(n=o.response)!=null&&n.data&&(i.value=o.response.data.errors)}).finally(()=>a.value=!1)},deleteGood:async t=>{let e={};l.value==="en"?(e.title="Are you sure?",e.text="You won't be able to revert this action!",e.confirmButtonText="Yes, delete it!",e.confirmButtonColor="#ef4444",e.timer=2e4,e.timerProgressBar=!0,e.reverseButtons=!0):(e.title="你确定吗？",e.text="您将无法恢复此操作！",e.confirmButtonText="是的，删除它！",e.confirmButtonColor="#ef4444",e.timer=2e4,e.timerProgressBar=!0,e.reverseButtons=!0),s(e).then(o=>{o.isConfirmed&&axios.delete("/api/goods/"+t).then(n=>{u(),r.push({name:"salesManager.index"}),l.value==="en"?s({icon:"success",title:"Good deleted successfully"}):s({icon:"success",title:"好删除成功"})}).catch(n=>{l.value==="en"?s({icon:"error",title:"Something went wrong"}):s({icon:"error",title:"出了些问题"})})})},validationErrors:i,isLoading:a}}export{x as u};
