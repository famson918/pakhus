import{z as J,x as T,h as G,A as H,k as I,o as n,b as i,d as e,w as K,t as o,C as d,D as v,q as r,F as _,r as h,J as O,m as Q,n as W,N as X}from"./app-c86f40bf.js";import{u as Y}from"./roles-4d4e2302.js";import{u as Z}from"./users-276a5983.js";import{d as $,u as ee,a as u}from"./vee-validate.esm-05f97611.js";import{u as se}from"./rules-b728849b.js";const oe={class:"container row justify-content-center my-5"},te={class:"col-md-12"},le={class:"card border-0 shadow-sm"},ae={class:"card-body"},ne={class:"mb-3"},ie={for:"user-title",class:"form-label"},re={class:"text-danger mt-1"},de={class:"text-danger mt-1"},me={class:"mb-3"},ue={for:"email",class:"form-label"},ce={class:"text-danger mt-1"},pe={class:"text-danger mt-1"},ve={class:"mb-3"},_e={for:"password",class:"form-label"},he={class:"text-danger mt-1"},fe={class:"text-danger mt-1"},be={class:"mb-3"},we={for:"password",class:"form-label"},ye={class:"text-danger mt-1"},ge={class:"text-danger mt-1"},Ve={class:"mb-3"},Ne={for:"password",class:"form-label"},$e={class:"text-danger mt-1"},Pe={class:"text-danger mt-1"},Ue={class:"mb-3"},qe={for:"password",class:"form-label"},ke={class:"text-danger mt-1"},xe={class:"text-danger mt-1"},Re={class:"mb-3"},Fe={for:"password",class:"form-label"},De={value:"user"},Se={value:"admin"},Ce={class:"mt-4"},Ee=["disabled"],Le={class:""},Me={key:0},Be={key:1},Ke={__name:"Edit",setup(je){const{roleList:ze,getRoleList:P}=Y(),{updateUser:U,getUser:q,user:m,validationErrors:c,isLoading:f}=Z(),{required:k,min:x}=se();$("required",k),$("min",x);const R={name:"required",email:"required",role:"required",cellPhone:"required",companyName:"required",position:"required",password:"min:8"},{validate:F,errors:p,resetForm:Ae}=ee({validationSchema:R}),{value:D}=u("name",null,{initialValue:""}),{value:S}=u("email",null,{initialValue:""}),{value:C}=u("password",null,{initialValue:""}),{value:E}=u("role",null,{initialValue:""}),{value:L}=u("cellPhone",null,{initialValue:""}),{value:M}=u("companyName",null,{initialValue:""}),{value:B}=u("position",null,{initialValue:""}),t=J({name:D,email:S,password:C,role:E,cellPhone:L,companyName:M,position:B}),j=T();function z(){F().then(l=>{l.valid&&U(t)})}return G(()=>{q(j.params.id),P()}),H(()=>{t.id=m.value.id,t.name=m.value.name,t.email=m.value.email,t.role=m.value.role,t.cellPhone=m.value.cellPhone,t.companyName=m.value.companyName,t.position=m.value.position}),(l,a)=>{var b,w,y,g,V,N;const A=I("router-link");return n(),i("div",oe,[e("div",te,[e("div",le,[e("div",ae,[e("form",{onSubmit:K(z,["prevent"])},[e("div",ne,[e("label",ie,o(l.$t("name")),1),d(e("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>t.name=s),id:"user-title",type:"text",class:"form-control"},null,512),[[v,t.name]]),e("div",re,o(r(p).name),1),e("div",de,[(n(!0),i(_,null,h((b=r(c))==null?void 0:b.name,s=>(n(),i("div",null,o(s),1))),256))])]),e("div",me,[e("label",ue,o(l.$t("email")),1),d(e("input",{"onUpdate:modelValue":a[1]||(a[1]=s=>t.email=s),id:"email",type:"email",class:"form-control"},null,512),[[v,t.email]]),e("div",ce,o(r(p).email),1),e("div",pe,[(n(!0),i(_,null,h((w=r(c))==null?void 0:w.email,s=>(n(),i("div",null,o(s),1))),256))])]),e("div",ve,[e("label",_e,o(l.$t("password")),1),d(e("input",{"onUpdate:modelValue":a[2]||(a[2]=s=>t.password=s),id:"password",type:"password",class:"form-control"},null,512),[[v,t.password]]),e("div",he,o(r(p).password),1),e("div",fe,[(n(!0),i(_,null,h((y=r(c))==null?void 0:y.password,s=>(n(),i("div",null,o(s),1))),256))])]),e("div",be,[e("label",we,o(l.$t("cellPhone")),1),d(e("input",{"onUpdate:modelValue":a[3]||(a[3]=s=>t.cellPhone=s),id:"password",type:"text",class:"form-control"},null,512),[[v,t.cellPhone]]),e("div",ye,o(r(p).cellPhone),1),e("div",ge,[(n(!0),i(_,null,h((g=r(c))==null?void 0:g.cellPhone,s=>(n(),i("div",null,o(s),1))),256))])]),e("div",Ve,[e("label",Ne,o(l.$t("companyName")),1),d(e("input",{"onUpdate:modelValue":a[4]||(a[4]=s=>t.companyName=s),id:"password",type:"text",class:"form-control"},null,512),[[v,t.companyName]]),e("div",$e,o(r(p).companyName),1),e("div",Pe,[(n(!0),i(_,null,h((V=r(c))==null?void 0:V.companyName,s=>(n(),i("div",null,o(s),1))),256))])]),e("div",Ue,[e("label",qe,o(l.$t("position")),1),d(e("input",{"onUpdate:modelValue":a[5]||(a[5]=s=>t.position=s),id:"password",type:"text",class:"form-control"},null,512),[[v,t.position]]),e("div",ke,o(r(p).position),1),e("div",xe,[(n(!0),i(_,null,h((N=r(c))==null?void 0:N.position,s=>(n(),i("div",null,o(s),1))),256))])]),e("div",Re,[e("label",Fe,o(l.$t("role")),1),d(e("select",{"onUpdate:modelValue":a[6]||(a[6]=s=>t.role=s),onChange:a[7]||(a[7]=(...s)=>l.changeRole&&l.changeRole(...s)),class:"form-select col-2","aria-label":"Default select example"},[e("option",De,o(l.$t("user")),1),e("option",Se,o(l.$t("admin")),1)],544),[[O,t.role]])]),e("div",Ce,[Q(A,{to:"/users",class:"btn btn-light btn-active-light-primary me-2"},{default:W(()=>[e("span",null,o(l.$t("cancel")),1)]),_:1}),e("button",{disabled:r(f),class:"btn btn-primary"},[d(e("div",Le,null,512),[[X,r(f)]]),r(f)?(n(),i("span",Me,o(l.$t(l.processing)),1)):(n(),i("span",Be,o(l.$t("save")),1))],8,Ee)])],32)])])])])}}};export{Ke as default};
