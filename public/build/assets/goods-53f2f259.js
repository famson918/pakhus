import{a as p,z as g,u as f,s as u,i as m,c as h}from"./app-ed41658f.js";function B(){const{t}=p(),l=g(),d=f(),r=u({}),a=u(!1),i=m("$swal");h(()=>d.state.lang.locale);const c=async()=>{axios.get("/api/get-goods").then(s=>{d.dispatch("good/getGoods",s.data.data)})};return{getGoods:c,getGood:async()=>{axios.get("/api/get-good/"+l.params.id).then(({data:s})=>{d.dispatch("good/getGood",s)})},storeGood:async s=>{if(a.value)return;a.value=!0,r.value={};let o=new FormData;for(let e in s)s.hasOwnProperty(e)&&o.append(e,s[e]);console.log("serializedGood",o),axios.post("/api/goods",o,{headers:{"content-type":"multipart/form-data"}}).then(e=>{c(),console.log("response",e),i({position:"top-end",icon:"success",title:t("goodSavedSuccessMessage"),showConfirmButton:!1,timer:1500}),l.push({name:"salesManager.index"})}).catch(e=>{var n;(n=e.response)!=null&&n.data&&(r.value=e.response.data.errors)}).finally(()=>a.value=!1)},updateGood:async s=>{if(a.value)return;a.value=!0,r.value={};let o=new FormData;for(let e in s)s.hasOwnProperty(e)&&o.append(e,s[e]);console.log("serializedGood",o),axios.post("/api/goods-update",o,{headers:{"content-type":"multipart/form-data"}}).then(e=>{console.log("response",e),i({position:"top-end",icon:"success",title:t("goodUpdatedSuccessMessage"),showConfirmButton:!1,timer:1500}),l.push({name:"salesManager.index"})}).catch(e=>{var n;console.log("error",e),(n=e.response)!=null&&n.data&&(r.value=e.response.data.errors)}).finally(()=>a.value=!1)},deleteGood:async s=>{let o={};o.title=t("areYouSure"),o.text=t("youCanCancel"),o.confirmButtonText=t("yesDeleteIt"),o.confirmButtonColor="#ef4444",o.timer=2e4,o.timerProgressBar=!0,o.reverseButtons=!0,i(o).then(e=>{e.isConfirmed&&axios.delete("/api/goods/"+s).then(n=>{c(),l.push({name:"salesManager.index"}),i({icon:"success",title:t("goodDeletedSuccessMessage")})}).catch(n=>{i({icon:"error",title:t("error_alert_text")})})})},validationErrors:r,isLoading:a}}export{B as u};
